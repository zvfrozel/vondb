author: Zack Chroman, Mehtaab Sawhney
desc: $G' \cong G''$
hardness: 20
source: USA TST 2020/4
tags: [2020-01, nice, criticalclaim, maturity, graph, process, bet]
url: https://aops.com/community/p13913804

---

For a finite simple graph $G$, we define $G'$ to be the graph
on the same vertex set as $G$, where for any two vertices $u \neq v$,
the pair $\{u,v\}$ is an edge of $G'$ if and only if
$u$ and $v$ have a common neighbor in $G$.
Prove that if $G$ is a finite simple graph which is isomorphic to $(G')'$,
then $G$ is also isomorphic to $G'$.

---

We say a vertex of a graph is \emph{fatal} if it has degree at least $3$,
and some two of its neighbors are not adjacent.

\begin{claim*}
  The graph $G'$ has at least as many triangles as $G$,
  and has strictly more if $G$ has any fatal vertices.
\end{claim*}
\begin{proof}
  Obviously any triangle in $G$ persists in $G'$.
  Moreover, suppose $v$ is a fatal vertex of $G$.
  Then the neighbors of $G$ will form a clique in $G'$
  which was not there already, so there are more triangles.
\end{proof}

Thus we only need to consider graphs $G$ with no fatal vertices.
Looking at the connected components, the only possibilities are cliques
(including single vertices), cycles, and paths.
So in what follows we restrict our attention to graphs $G$
only consisting of such components.

\begin{remark*}
  [Warning]
  Beware: assuming $G$ is connected loses generality.
  For example, it could be that $G = G_1 \sqcup G_2$,
  where $G_1' \cong G_2$ and $G_2' \cong G_1$.
\end{remark*}

First, note that the following are stable under the operation:
\begin{itemize}
  \ii an isolated vertex,
  \ii a cycle of odd length, or
  \ii a clique with at least three vertices.
\end{itemize}
In particular, $G \cong G''$ holds for such graphs.

On the other hand, cycles of even length or paths of nonzero
length will break into more connected components.
For this reason, a graph $G$ with any of these components will not satisfy $G \cong G''$
because $G'$ will have strictly more connected components than $G$,
and $G''$ will have at least as many as $G'$.

Therefore $G \cong G''$ if and only if $G$
is a disjoint union of the three types of connected components named earlier.
Since $G \cong G'$ holds for such graphs as well, the problem statement follows right away.

\begin{remark*}
  Note that the same proof works equally well
  for an arbitrary number of iterations $G^{''\dots''} \cong G$,
  rather than just $G'' \cong G$.
\end{remark*}

\begin{remark*}
  The proposers included a variant of the problem where given any graph $G$,
  the operation stabilized after at most $O(\log n)$ operations,
  where $n$ was the number of vertices of $G$.
\end{remark*}
