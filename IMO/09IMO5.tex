desc: $a$, $f(b)$, and $f(b+f(a)-1)$ are triangle
source: IMO 2009/5
tags: [FE, 2016-08, rushdown, grinding, induct, aleph]
hardness: 15
url: https://aops.com/community/p1562848
author: Bruno Le Floch (FRA)

---

Find all functions $f \colon \ZZ_{>0} \to \ZZ_{>0}$
such that for positive integers $a$ and $b$, the numbers
\[ a, \qquad f(b), \qquad f(b+f(a)-1) \]
are the sides of a non-degenerate triangle.

---

The only function is the identity function (which works).
We prove it is the only one.

Let $P(a,b)$ denote the given statement.

\begin{claim*}
  We have $f(1) = 1$, and $f(f(n)) = n$.
  (In particular $f$ is a bijection.)
\end{claim*}
\begin{proof}
  Note that \[ P(1,b) \implies f(b) = f(b+f(1)-1). \]
  Otherwise, the function $f$ is periodic modulo $N = f(1)-1 \ge 1$.
  This is impossible since we can fix $b$ and let $a$ be arbitrarily
  large in some residue class modulo $N$.

  Hence $f(1)=1$, so taking $P(n,1)$ gives $f(f(n)) = n$.
\end{proof}

\begin{claim*}
  Let $\delta = f(2)-1 > 0$.
  Then for every $n$,
  \[ f(n+1) = f(n) + \delta
    \quad\text{ or }\quad f(n-1) = f(n) + \delta \]
\end{claim*}
\begin{proof}
  Use
  \[ P(2, f(n)) \implies n-2 < f( f(n) + \delta ) < n+2. \]
  Let $y = f(f(n)+\delta)$, hence $n-2 < y < n+2$
  and $f(y) = f(n)+\delta$.
  But, remark that if $y = n$, we get $\delta = 0$, contradiction.
  So $y \in \{n+1, n-1\}$ and that is all.
\end{proof}

We now show $f$ is an arithmetic progression
with common difference $+\delta$.
Indeed we already know $f(1) = 1$ and $f(2) = 1+\delta$.
Now suppose $f(1)=1$, \dots, $f(n) = 1 + (n-1)\delta$.
Then by induction for any $n \ge 2$,
the second case can't hold,
so we have $f(n+1) = f(n)+\delta$, as desired.

Combined with $f(f(n)) = n$, we recover that $f$ is the identity.
