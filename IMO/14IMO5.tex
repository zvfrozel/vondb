desc:  Bank of Cape Town is a troll
source:  IMO 2014/5
tags:  [meta, pitfall, troll, induct, local, optimization, instructive, greedy, dumb, algorithm, magic, gimel]
author: Gerhard Woeginger (LUX)
hardness: 30
url: https://aops.com/community/p3543144

---

For every positive integer $n$,
the Bank of Cape Town issues coins of denomination $\frac 1n$.
Given a finite collection of such coins (of not necessarily different denominations)
with total value at most $99 + \frac12$, prove that it is possible to split
this collection into $100$ or fewer groups, such that each group has total value at most $1$.

---

We'll prove the result
for at most $k - \frac{k}{2k+1}$ with $k$ groups.
First, perform the following optimizations.
\begin{itemize}
 \ii If any coin of size $\frac{1}{2m}$ appears twice,
 then replace it with a single coin of size $\frac{1}{m}$.
 \ii If any coin of size $\frac{1}{2m+1}$ appears $2m+1$ times,
 group it into a single group and induct downwards.
\end{itemize}
Apply this operation repeatedly until it cannot be done anymore.

Now construct boxes $B_0$, $B_1$, \dots, $B_{k-1}$.
In box $B_0$ put any coins of size $\tfrac 12$
(clearly there is at most one).
In the other boxes $B_m$, put coins of size
$\frac{1}{2m+1}$ and $\frac{1}{2m+2}$
(at most $2m$ of the former and at most one of the latter).
Note that the total weight in the box is less than $1$.
Finally, place the remaining ``light'' coins of size
at most $\frac{1}{2k+1}$ in a pile.

Then just toss coins from the pile into the boxes arbitrarily,
other than the proviso that no box should have its weight exceed $1$.
We claim this uses up all coins in the pile.
Assume not, and that some coin remains in the pile
when all the boxes are saturated.
Then all the boxes must have at least $1 -\frac{1}{2k+1}$,
meaning the total amount in the boxes is strictly greater than
\[ k \left( 1 - \frac{1}{2k+1} \right) > k - \tfrac 12 \]
which is a contradiction.
\begin{remark*}
This gets a stronger bound $k - \frac{k}{2k+1}$
than the requested $k-\tfrac 12$.
\end{remark*}

---

Forces you to learn to give up on a method
Meta-analysis gives you the right optimization

Important meta remark: can tell it's true for all $k \le 100$
because you can pad with $1$-coins.
So almost certainly problem holds for all $k$ in general.
