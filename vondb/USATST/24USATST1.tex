author: Merlijn Staps
desc: Floor and ceiling
source: USA TST 2024/1
url: https://aops.com/community/p29409075
tags: [2023-12, find, bestpossible, manip, aleph]

---

Find the smallest constant $C > 1$ such that the following statement holds:
for every integer $n \ge 2$ and sequence of non-integer
positive real numbers $a_1$, $a_2$, \dots, $a_n$ satisfying
\[ \frac{1}{a_1} + \frac{1}{a_2} + \dots + \frac{1}{a_n} = 1, \]
it's possible to choose positive integers $b_i$ such that
\begin{enumerate}
  \ii[(i)] for each $i=1,2,\dots,n$,
  either $b_i = \left\lfloor a_i \right\rfloor$ or $b_i = \left\lfloor a_i \right\rfloor + 1$; and
  \ii[(ii)] we have
  \[ 1 < \frac1{b_1} + \frac1{b_2} + \dots + \frac{1}{b_n} \le C. \]
\end{enumerate}

---

\paragraph{Answer.} The answer is $C=\frac{3}{2}$.

\paragraph{Lower bound.}
Note that if $a_1 = \frac{4n-3}{2n-1}$ and $a_i = \frac{4n-3}{2}$ for $i > 1$,
then we must have $b_1 \in \{1,2\}$ and $b_i \in \{2n-2,2n-1\}$ for $i > 1$. If
we take $b_1 = 2$ then we obtain
\[
  \frac{1}{b_1} + \frac{1}{b_2} + \dots + \frac{1}{b_n} \le \frac{1}{2} + (n-1)
  \cdot \frac{1}{2n-2} = 1,
\]
whereas if we take $b_1 = 1$ then we obtain
\[
  \frac{1}{b_1} + \frac{1}{b_2} + \dots + \frac{1}{b_n}  \ge 1 + (n-1) \cdot
  \frac{1}{2n-1} = \frac{3n-2}{2n-1}.
\]
This shows that $C \ge \frac{3n-2}{2n-1}$, and as $n\to \infty$ this shows that
$C\geq \frac{3}{2}$.

\paragraph{Upper bound.}
For $0\leq k\leq n$, define
\[
  c_i = \sum_{i=1}^{k}\frac{1}{\lfloor a_i\rfloor}
  + \sum_{i=k+1}^{n}\frac{1}{\lfloor a_i\rfloor+1}.
\]
Note that $c_0 < c_1 < \dots < c_n$ and
\[c_0 < \frac{1}{a_1} + \frac{1}{a_2} + \dots + \frac{1}{a_n} = 1 < c_n.\]
This means there exists a unique value of $k$ for which $c_{k-1} < 1 < c_{k}$. For
this $k$ we have
\[
  1 < c_{k} = c_{k-1} + \frac{1}{(\lfloor a_k\rfloor)(\lfloor a_k\rfloor+1)} < 1 +
  \frac{1}{1\cdot 2} = \frac{3}{2}.
\]
Therefore we may choose $b_i = \lfloor a_i\rfloor$ for $i\leq k$ and $b_i =
\lfloor a_i\rfloor+1$ for $i > k$.

\begin{remark*}
  The solution can be phrased in the following ``motion-based'' way.
  Imagine starting with all floors (corresponding to $c_0$),
  then changing each floor to a ceiling one by one
  until after $n$ steps every floor is a ceiling (arriving at $c_n$).
  As we saw, $c_0 < 1 < c_n$, but $c_0 < \dots < c_n$.
  Moreover, each discrete step increases the sum by at most
  \[ \frac{1}{\left\lfloor a_i \right\rfloor}
    - \frac{1}{\left\lfloor a_i \right\rfloor + 1} \leq \frac 12 \]
  and so the changing sum must be in the interval $[1, 3/2]$ at some point.
\end{remark*}

\paragraph{Upper bound (alternate).}
First suppose $a_i < 2$ for some $i$. Assume without loss of generality $i=1$
here. Let $b_1=1$ and $b_i=\lfloor a_i\rfloor+1$ for all other $i$. Then
\begin{align*}
  1 &< \frac{1}{b_1} + \dots + \frac{1}{b_n} = 1 + \frac{1}{\lfloor a_2\rfloor +
  1} + \dotsb + \frac{1}{\lfloor a_n\rfloor + 1} \\
  &< \left(\frac{1}{2} +
  \frac{1}{a_1}\right) + \frac{1}{a_2} + \dotsb + \frac{1}{a_n} = \frac{3}{2}.
\end{align*}

Now suppose $a_i > 2$ always. Then $\frac{a_i}{\lfloor a_i\rfloor} <
\frac{3}{2}$, so
\[
  1 = \frac{1}{a_1} + \dotsb + \frac{1}{a_n} < \frac{1}{\lfloor a_1\rfloor} +
  \dots + \frac{1}{\lfloor a_n\rfloor} < \frac{3}{2}\left(\frac{1}{a_1} + \dotsb
  + \frac{1}{a_n}\right) = \frac{3}{2}.
\]
Therefore we may let $b_i=\lfloor a_i\rfloor$ for all $i$.

\begin{remark*}
  The original proposal asked to find the optimal $C$ for a fixed $n$. The
  answer is $\frac{3n-2}{2n-1}$, i.e. the lower bound construction in the
  solution is optimal.
\end{remark*}
